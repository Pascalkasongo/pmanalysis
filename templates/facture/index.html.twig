{{include('content/navbar.html.twig')}}
{{include('content/slidebar.html.twig')}}
{% block title %}Facture index{% endblock %}

{% block body %}
<div class="pcoded-content">
    <div class="container mt-4">
        <h1>Facture index</h1>

        <table class="table">
            <thead>
                <tr>
                    <th>Numero</th>
                    <th>Projet</th>
                    <th>Montant</th>
                    <th>actions</th>
                </tr>
            </thead>
            <tbody>
            {%set nombre = 0%}
            {% for facture in factures %}
            {% set nombre = nombre+1%}
                <tr>
                    <td>{{ nombre }}</td>
                    <td>{{ facture.projet.nom }}</td>
                        {% set montantH_total = 0 %}
                        {% for tache in facture.projet.taches %}
                            {% set montantH_total =montantH_total+ (tache.coutHoraire * tache.nombreHeure)+tache.ressource.coutRessource|default(0) %}
                        {% endfor %}
                    <td>
                        {{montantH_total}}
                    $</td>
                    <td>
                        <a href="{{ path('app_facture_show', {'id': facture.id}) }}"class="btn btn-primary btn-sm" title="View"><i class="fas fa-eye"></i></a>
                        <a href="{{ path('app_facture_edit', {'id': facture.id}) }}"class="btn btn-warning btn-sm" title="Edit"><i class="fas fa-edit"></i></a>
                        <a href="{{ path('app_facture_delete', {'id': facture.id}) }}"class="btn btn-danger btn-sm" title="Delete"><i class="fas fa-trash"></i></a>
                    </td>
                </tr>
            {% else %}
                <tr>
                    <td colspan="4">no records found</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
         <a href="{{ path('app_facture_new') }}" class="btn btn-primary">Create new</a>
    </div>
</div>
   
    {{include('content/data.html.twig')}}
{% endblock %}
